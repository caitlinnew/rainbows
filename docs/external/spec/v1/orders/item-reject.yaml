post:
  summary: '[Deprecated] Reject Order'
  deprecated: true
  tags:
    - Order
  operationId: brand-reject-order
  description: '[Deprecated] Please use the Order Transition endpoint.'
  parameters:
    - $ref: '../../v1.yaml#/components/parameters/acceptInHeader'
    - $ref: './components.yaml#/parameters/orderIdInPath'
    - $ref: './components.yaml#/parameters/orderIncludeResourcesInQuery'
  responses:
    '200':
      description: '[OK](https://jsonapi.org/format/#fetching-resources-responses-200)'
      content:
        application/vnd.api+json:
          schema:
            $ref: './components.yaml#/schemas/OrderGet'
          examples:
            example:
              value:
                jsonapi:
                  version: '1.0'
                data:
                  type: order
                  id: 1ecb023e-7ec0-6d5c-a477-0242ac170007
                  attributes:
                    status: rejected
                    reference: 3434273911
                    brandCurrency: EUR
                    brandNetAmount: 10229
                    brandTotalAmount: 10940
                    brandTotalAmountVat: 602
                    brandTotalAmountWithVat: 11542
                    brandRejectReason: Products not in stock.
                    retailerRejectReason: null
                    retailerCancellationRequestReason: null
                    billingName: Charles Attan
                    billingOrganisationName: Jumbo
                    billingStreet: Kortricklaan 101
                    billingPostalCode: 8121 GW
                    billingCity: Arnhem
                    billingCountryCode: NL
                    submittedAt: '2022-03-17T13:19:33+00:00'
                    shippedAt: null
                    brandPaidAt: null
                    createdAt: '2022-02-01T14:37:10+00:00'
                    updatedAt: '2022-03-31T15:10:07+00:00'
                    shippingMethod: null
                    shippingOverview:
                      availableShippingMethods:
                        - custom
                        - ankorstore
                      shipToAddress:
                        name: John Smith
                        organisationName: Test
                        street: Test Street
                        city: Commentry
                        postalCode: '03633'
                        countryCode: FR
                      expectedShippingDates:
                        minimum: '2022-03-22T00:00:00+00:00'
                        maximum: '2022-03-24T23:59:59+00:00'
                      provider: null
                      tracking: null
                      latestQuote: null
                      parcels: [ ]
                      transaction: null
    '401':
      $ref: '../../v1.yaml#/components/responses/Unauthorized'
    '403':
      $ref: '../../v1.yaml#/components/responses/Forbidden'
    '404':
      $ref: '../../v1.yaml#/components/responses/NotFound'
    '406':
      $ref: '../../v1.yaml#/components/responses/NotAcceptable'
    '409':
      description: Conflict
      content:
        application/vnd.api+json:
          schema:
            $ref: '../../v1.yaml#/components/schemas/failure'
          examples:
            State update failed:
              value:
                jsonapi:
                  version: '1.0'
                errors:
                  - code: ORDER_ACTION_REJECT_FAILED
                    detail: Order cannot be rejected from this state
                    status: '409'
    '415':
      $ref: '../../v1.yaml#/components/responses/UnsupportedMediaType'
    '422':
      description: 'Unprocessable Entity : Data provided are invalid'
      content:
        application/vnd.api+json:
          schema:
            $ref: '../../v1.yaml#/components/schemas/failure'
          example:
            jsonapi:
              version: string
            errors:
              - detail: The order.reject reason is required.
                source:
                  pointer: order.rejectReason
                status: '422'
                title: Unprocessable Content
  requestBody:
    content:
      application/vnd.api+json:
        schema:
          description: Reject payload
          type: object
          properties:
            order:
              type: object
              required:
                - rejectType
              properties:
                rejectReason:
                  type: string
                  description: 'A detailed description of the reason for the order rejection. Required if reject type "OTHER" is used, optional for the rest of the predefined reject types'
                  minLength: 1
                  maxLength: 1000
                  writeOnly: true
                rejectType:
                  type: string
                  description: One of the available reject reasons. If this field is omitted from the payload it will default to OTHER to ensure backwards compatibility. Please note that this field will be mandatory in the future.
                  enum:
                    - BRAND_ALREADY_HAS_CUSTOMER_IN_THE_AREA
                    - BRAND_CANNOT_DELIVER_TO_THE_AREA
                    - BRAND_HAS_EXCLUSIVE_DISTRIBUTOR_IN_THE_REGION
                    - BUYER_NOT_A_RETAILER
                    - ORDER_ITEMS_PRICES_INCORRECT
                    - PAYMENT_ISSUES_WITH_RETAILER
                    - PREPARATION_TIME_TOO_HIGH
                    - PRODUCT_OUT_OF_STOCK
                    - PURCHASE_NOT_FOR_RESALE
                    - RETAILER_AGREED_TO_DO_CHANGES_TO_ORDER
                    - RETAILER_NOT_GOOD_FIT_FOR_BRAND
                    - RETAILER_VAT_NUMBER_MISSING
                    - OTHER
                  writeOnly: true
          required:
            - order
        examples:
          predefined-reject-type:
            value:
              order:
                rejectType: PRODUCT_OUT_OF_STOCK
          custom-reject-reason:
            value:
              order:
                rejectType: OTHER
                rejectReason: Unfortunately these days we cannot send the order due to lack of the necessary package materials
