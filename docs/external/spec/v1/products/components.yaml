schemas:
  Product:
    title: Product Resource
    description: The resource object for Product
    type: object
    additionalProperties: false
    properties:
      type:
        $ref: '../../v1.yaml#/components/schemas/type'
      id:
        $ref: '../../v1.yaml#/components/schemas/id'
      attributes:
        type: object
        properties:
          name:
            type: string
            description: The name of the product
          description:
            type: string
            description: The description of the product
          language:
            type: string
            description: The language of the title and description
          dimensions:
            type: string
            description: The human readable dimensions of the product
          netWeight:
            type: string
            description: The weight of the product itself
          capacity:
            type: string
            description: eg. Capacity in weight eg 100g
          position:
            type: number
            description: 'The position of the product in the brands catalog, lower the higher it is'
          unitMultiplier:
            type: integer
            description: 'How many products are shipped together, ie a case of 6 wine bottles. Presented options then would be 6, 12, 18 etc.'
          vatRate:
            type: number
            format: float
            description: The VAT rate of the product
          discountRate:
            description: The percentage discount if a brand is offering one (0 - 1)
            type: number
            format: float
          active:
            type: boolean
            description: Whether the product is active or not
          outOfStock:
            type: boolean
            description: Whether the product is out of stock or not
          archived:
            type: boolean
            description: Whether the product is archived or not
          retailPrice:
            $ref: '../../v1.yaml#/components/schemas/money'
            description: The suggested retail price of the product
          wholesalePrice:
            $ref: '../../v1.yaml#/components/schemas/money'
            description: The wholesale price after the discount rate is applied
          originalWholesalePrice:
            $ref: '../../v1.yaml#/components/schemas/money'
            description: The original wholesale price set by the brand
          createdAt:
            type: string
            format: datetime
            description: The timestamp when the product was created
          indexedAt:
            type:
              - 'null'
              - string
            format: datetime
            description: The timestamp when the product was indexed
          updatedAt:
            type: string
            format: datetime
            description: The timestamp when the product was updated
      relationships:
        type: object
        properties:
          productOption:
            description: 'Reference: Product Option Resource'
            type: object
            properties:
              data:
                $ref: '../../v1.yaml#/components/schemas/relationshipToMany'
          productVariant:
            description: 'Reference: Product Variant Resource'
            type: object
            properties:
              data:
                $ref: '../../v1.yaml#/components/schemas/relationshipToMany'
    required:
      - type
      - id
  ProductCollection:
    type: object
    title: Product Collection
    required:
      - data
    properties:
      meta:
        $ref: '../../v1.yaml#/components/schemas/paginationMeta'
      jsonapi:
        $ref: '../../v1.yaml#/components/schemas/jsonapi'
      links:
        $ref: '../../v1.yaml#/components/schemas/paginationLinks'
      data:
        description: List of Product resource objects
        type: array
        uniqueItems: true
        items:
          $ref: '#/schemas/Product'
    additionalProperties: false
  ProductGet:
    type: object
    additionalProperties: false
    title: Product Get
    properties:
      jsonapi:
        $ref: '../../v1.yaml#/components/schemas/jsonapi'
      data:
        $ref: '#/schemas/Product'
      included:
        description: 'To reduce the number of HTTP requests, servers **MAY** allow responses that include related resources along with the requested primary resources. Such responses are called `compound documents`.'
        type:
          - array
          - 'null'
        uniqueItems: true
        items:
          anyOf:
            - $ref: '../product-variants/components.yaml#/schemas/ProductVariant'
            - $ref: '../product-variants/components.yaml#/schemas/ProductOption'
    examples:
      - jsonapi:
          $ref: '../../v1.yaml#/components/schemas/jsonapi'
        data:
          type: product
          id: 0c5e6540-0da9-1ecb-bf59-0242ac170007
          attributes:
            name: Example Product
            description: Example description of product
            language: fr
            dimensions: '5,5x5,5x6'
            netWeight: 100G
            capacity: 100g
            position: 34
            unitMultiplier: 12
            vatRate: 5.5
            discountRate: 0
            active: true
            outOfStock: false
            archived: false
            retailPrice: 750
            wholesalePrice: 426
            originalWholesalePrice: 426
            createdAt: '2020-08-27T14:26:38.000000Z'
            indexedAt: '2022-02-10T03:26:11.000000Z'
            updatedAt: '2022-02-09T14:49:09.000000Z'
        included:
          - type: productVariant
            id: 3571bdc1-fa01-44fa-9342-d99bd1c2befa
            attributes:
              name: Test Product Variant
              sku: Product-Variant-001
              ian: '1924859325863'
              createdAt: '2020-08-27T14:29:15.000000Z'
              updatedAt: '2021-10-04T12:03:31.000000Z'
              archivedAt: null
              retailPrice: 800
              wholesalePrice: 500
              originalWholesalePrice: 500
              availableQuantity: 125
              reservedQuantity: 25
              stockQuantity: 150
              isAlwaysInStock: false
    required:
      - data
parameters:
  productIdInPath:
    name: product
    in: path
    required: true
    schema:
      $ref: '../../v1.yaml#/components/schemas/id'
      default: 079ba9ad-dcdb-4dda-ba0a-1174dad313c5
  productIncludeResourcesInQuery:
    name: include
    in: query
    description: '[Include Product Variants](https://ankorstore.stoplight.io/docs/ankorstore-api/f2d05f89b82c7-working-with-products#including-product-variants)'
    allowEmptyValue: true
    required: false
    schema:
      type: string
