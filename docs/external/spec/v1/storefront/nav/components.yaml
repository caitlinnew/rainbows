schemas:
  NavigationElement:
    oneOf:
      - $ref: '#/schemas/NavigationItem'
      - $ref: '#/schemas/NavigationItemGroup'
    discriminator:
      propertyName: type
  NavigationItem:
    title: NavigationItem
    allOf:
      - $ref: '#/schemas/NavigationNode'
      - type: object
        properties:
          type:
            type: string
            const: nav-item
          attributes:
            allOf:
              - $ref: '#/schemas/NavigationLink'
              - type: object
                properties:
                  related:
                    type: object
                    description: Secondary navigation links
                    additionalProperties:
                      $ref: '#/schemas/NavigationLink'
                    properties:
                      self:
                        $ref: '#/schemas/NavigationLink'
                      newest-brands:
                        $ref: '#/schemas/NavigationLink'
                      newest-products:
                        $ref: '#/schemas/NavigationLink'
#                  children:
#                    type: array
#                    description: Underlying menu items
#                    items:
#                      $ref: '#/schemas/NavigationElement'
  NavigationItemGroup:
    title: NavigationItemGroup
    allOf:
      - $ref: '#/schemas/NavigationNode'
      - type: object
        properties:
          type:
            type: string
            const: nav-item-group
          attributes:
            type: object
            properties:
              title:
                type: string
                description: Title of the menu item group
              items:
                type: array
                description: The list of menu items in the group
                items:
                  $ref: '#/schemas/NavigationItem'
  NavigationLink:
    title: NavigationLink
    type: object
    properties:
      label:
        type: string
        description: The label of the link
      url:
        type: string
        format: uri-reference
        description: The URL to which the link points to
      target:
        type: string
        enum:
          - self
          - blank
        description: Where to open the linked URL
      external:
        type: boolean
        description: Whether or not the URL is external to the website
        readOnly: true
      exclude:
        type: boolean
        default: false
        description: Exclude the link from the navigation menu
    required:
      - label
  NavigationNode:
    type: object
    additionalProperties: false
    properties:
      id:
        type: string
        format: uuid
        description: A globally-unique identifier for the navigation element
      type:
        type: string
      attributes:
        type: object
      meta:
        type: object
        required:
          - depth
          - position
        additionalProperties: true
        properties:
          depth:
            type: integer
            minimum: 0
            description: Depth of the navigation element in the hierarchy (starting at 0)
          position:
            type: integer
            minimum: 0
            description: A decimal value used to order elements that are on the same level in the navigation tree (starting at 0)
    required:
      - id
      - type
responses:
  NavigationMenuItems:
    description: A list of menu items
    content:
      application/vnd.api+json:
        schema:
          type: object
          properties:
            jsonapi:
              $ref: '../../../v1.yaml#/components/schemas/jsonapi'
            data:
              type: array
              items:
                $ref: '#/schemas/NavigationElement'
        examples:
          main-menu:
            $ref: '#/examples/NavigationMainMenu'
examples:
  NavigationMainMenu:
    $ref: './get-example.yaml'
