post:
  summary: Add Webhook Subscription to Application
  operationId: add-application-webhook-subscription
  tags:
    - Webhook Subscriptions
  responses:
    '201':
      $ref: './components.yaml#/responses/ApplicationWebhookSubscriptionResponse'
    '400':
      $ref: '../internal.yaml#/components/responses/BadRequest'
    '401':
      $ref: '../internal.yaml#/components/responses/Unauthorized'
    '403':
      $ref: '../internal.yaml#/components/responses/Forbidden'
    '404':
      $ref: '../internal.yaml#/components/responses/NotFound'
    '406':
      $ref: '../internal.yaml#/components/responses/NotAcceptable'
    '415':
      $ref: '../internal.yaml#/components/responses/UnsupportedMediaType'
    '500':
      $ref: '../internal.yaml#/components/responses/ServerError'
  description: Adds a new webhook subscription to the existing application
  requestBody:
    content:
      application/vnd.api+json:
        schema:
          type: object
          additionalProperties: false
          properties:
            data:
              type: object
              required:
                - type
                - attributes
                - relationships
              properties:
                type:
                  type: string
                  enum:
                    - webhook-subscription
                  example: webhook-subscription
                attributes:
                  type: object
                  properties:
                    url:
                      type: string
                      format: uri
                      example: 'https://my-app.com/webhook-listener'
                    events:
                      type: array
                      minItems: 1
                      uniqueItems: true
                      items:
                        type: string
                  required:
                    - url
                    - events
                relationships:
                  type: object
                  properties:
                    applications:
                      type: object
                      properties:
                        data:
                          type: object
                          properties:
                            type:
                              type: string
                            id:
                              type: string
                          required:
                            - type
                            - id
                      required:
                        - data
                  required:
                    - applications
          required:
            - data
