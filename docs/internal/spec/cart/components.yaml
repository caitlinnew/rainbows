parameters:
  id:
    schema:
      type: string
      format: uuid
    name: id
    in: path
    required: true
    description: Cart ID
responses:
  CartsResponse:
    description: Cart resources response represents a collection of the retailer's cart
    content:
      application/vnd.api+json:
        schema:
          type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/schemas/CartResource'
            jsonapi:
              $ref: '../internal.yaml#/components/schemas/jsonapi'
            included:
              type: array
              items:
                anyOf:
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasingListResource'
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasingListItemResource'
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasableItemResource'
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasableAggregateResource'
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasableAggregateBrandResource'
          required:
            - data
  CartResponse:
    description: Cart resource response represents a single cart
    content:
      application/vnd.api+json:
        schema:
          type: object
          properties:
            data:
              type: object
              $ref: '#/schemas/CartResource'
            jsonapi:
              $ref: '../internal.yaml#/components/schemas/jsonapi'
            included:
              type: array
              items:
                anyOf:
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasingListResource'
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasingListItemResource'
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasableItemResource'
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasableAggregateResource'
                  - $ref: 'purchasing-lists/components.yaml#/schemas/PurchasableAggregateBrandResource'
          required:
            - data
schemas:
  CartResource:
    title: CartResource
    type: object
    description: Cart resource
    properties:
      type:
        $ref: '../internal.yaml#/components/schemas/type'
      id:
        $ref: '../internal.yaml#/components/schemas/id'
      attributes:
        type: object
      relationships:
        type: object
        properties:
          list:
            type: object
            properties:
              data:
                $ref: '../internal.yaml#/components/schemas/relationshipToOne'
    required:
      - type
      - id
      - attributes

  PromocodeResource:
    title: PromocodeResource
    type: object
    description: Promocode resource
    properties:
      type:
        $ref: '../internal.yaml#/components/schemas/type'
      id:
        $ref: '../internal.yaml#/components/schemas/id'
      attributes:
        type: object
        required:
          - code
          - amount
          - expiresAt
          - minimumOrder
        properties:
          code:
            type: string
          message:
            type: string
          status:
            type: string
          amount:
            $ref: '../internal.yaml#/components/schemas/amount'
          expiresAt:
            type: string
            format: datetime
          minimumOrder:
            $ref: '../internal.yaml#/components/schemas/amount'
          minimumCheckout:
            $ref: '../internal.yaml#/components/schemas/amount'

  AddressResource:
    title: AddressResource
    type: object
    description: Address resource
    properties:
      type:
        $ref: '../internal.yaml#/components/schemas/type'
      id:
        $ref: '../internal.yaml#/components/schemas/id'
      attributes:
        type: object
        required:
          - name
          - city
          - postalCode
          - street
          - country
        properties:
          name:
            type: string
          organisationName:
            type: string
          city:
            type: string
          postalCode:
            type: string
          street:
            type: string
          country:
            $ref: '#/schemas/CountryResource'
    required:
      - type
      - id
      - attributes

  CountryResource:
    title: CountryResource
    type: object
    description: Country resource
    properties:
      id:
        $ref: '../internal.yaml#/components/schemas/countryCode'
      type:
        $ref: '../internal.yaml#/components/schemas/type'
      attributes:
        type: object
        required:
          - name
        properties:
          name:
            type: string
    required:
      - type
      - id
      - attributes

  PatchCartInput:
    title: PatchCartInput
    type: object
    description: The list of items to be added or updated to the cart, with their uuid (ProductVariant) and quantity
    properties:
      data:
        type: object
        properties:
          items:
            type: object
            properties:
              id:
                $ref: '../internal.yaml#/components/schemas/id'
              quantity:
                type: integer
                minimum: 0
            required:
              - id
              - quantity
        required:
          - items
    required:
      - data
