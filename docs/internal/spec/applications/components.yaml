parameters:
  applicationId:
    schema:
      type: string
    name: applicationId
    in: path
    required: true
    description: Application ID
schemas:
  ApplicationResource:
    title: ApplicationResource
    type: object
    example:
      id: 43efbfbd-bfbd-1eef-1e6a-6200efbfbdef
      type: application
      attributes:
        name: My sandbox
        developerEmail: dev@my-app.com
        clientId: k322k7frs87e8w7hri3jkke7ry7
        clientSecret: v8s98g9s895h8929834
    properties:
      type:
        type: string
        const: application
      id:
        $ref: '../internal.yaml#/components/schemas/id'
      attributes:
        type: object
        properties:
          name:
            type: string
            description: Custom application name (should be unique within user applications)
          developerEmail:
            type: string
            description: Email of the developer to contact in context of any issues with this application
            format: email
            example: developer@application.com
          clientId:
            type: string
            description: Client ID to be used for access token issuance
            readOnly: true
          clientSecret:
            type:
              - string
              - 'null'
            description: 'Secret to be used for access token issuance. Can be invoked only once, when application is created or credentials re-generated.'
        required:
          - name
          - developerEmail
          - clientId
          - clientSecret
      relationships:
        type: object
        description: Only presented if asked explicitly in the request
        properties:
          webhookSubscriptions:
            type: object
            properties:
              data:
                $ref: '../internal.yaml#/components/schemas/relationshipToMany'
    required:
      - id
      - type
      - attributes
responses:
  ApplicationResponse:
    description: Single application resource response
    content:
      application/vnd.api+json:
        schema:
          type: object
          properties:
            data:
              $ref: '#/schemas/ApplicationResource'
            included:
              type: array
              description: 'To reduce the number of HTTP requests, servers **MAY** allow responses that include related resources along with the requested primary resources. Such responses are called `compound documents`.'
              items:
                anyOf:
                  - $ref: '../webhook-subscriptions/components.yaml#/schemas/ApplicationWebhookSubscriptionResource'
            jsonapi:
              $ref: '../internal.yaml#/components/schemas/jsonapi'
          required:
            - data
            - jsonapi
          example:
            jsonapi:
              version: '1.0'
            data:
              type: application
              id: 43efbfbd-bfbd-1eef-1e6a-6200efbfbdef
              attributes:
                name: My sandbox
                developerEmail: dev@my-app.com
                clientId: k322k7frs87e8w7hri3jkke7ry7
                clientSecret: v8s98g9s895h8929834
              relationships:
                webhookSubscriptions:
                  data:
                    - id: efbfbdef-bfbd-1eef-bfbd-efbfbdefbfbd
                      type: webhook-subscription
            included:
              - id: efbfbdef-bfbd-1eef-bfbd-efbfbdefbfbd
                type: webhook-subscription
                attributes:
                  webhookUrl: 'https://my-app.com/webhook-listener'
                  signingSecret: 'some-secret'
                  events:
                    - orders.brand_created
                    - orders.brand_accepted
                    - orders.brand_rejected
                    - orders.shipped
  ApplicationsCollectionResponse:
    description: Collection of application resources
    content:
      application/vnd.api+json:
        schema:
          type: object
          properties:
            data:
              $ref: '#/schemas/ApplicationResource'
            included:
              type: array
              description: 'To reduce the number of HTTP requests, servers **MAY** allow responses that include related resources along with the requested primary resources. Such responses are called `compound documents`.'
              items:
                anyOf:
                  - $ref: '../webhook-subscriptions/components.yaml#/schemas/ApplicationWebhookSubscriptionResource'
            jsonapi:
              $ref: '../internal.yaml#/components/schemas/jsonapi'
          required:
            - data
