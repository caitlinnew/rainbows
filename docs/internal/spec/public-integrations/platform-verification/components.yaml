schemas:
  PlatformVerificationError:
    type: object
    additionalProperties: false
    properties:
      code:
        type: string
        enum:
          - INVALID_URL_FORMAT
          - SITE_DOES_NOT_EXIST
          - PLATFORM_MISMATCH
          - TARGET_RESPONDED_WITH_ERROR
          - UNABLE_TO_CONNECT
          - VERIFICATION_ERROR
      detail:
        type: string
      status:
        type: string
    required:
      - code
      - detail
      - status

requestBodies:
  PlatformVerificationRequestBody:
    content:
      application/vnd.api+json:
        schema:
          type: object
          properties:
            data:
              type: object
              properties:
                type:
                  $ref: '../../internal.yaml#/components/schemas/type'
                attributes:
                  type: object
                  properties:
                    platformName:
                      type: string
                    platformUrl:
                      type: string
                  required:
                    - platformName
                    - platformUrl
        examples:
          example:
            value:
              data:
                type: platform-verifications
                attributes:
                  platformName: WOO_COMMERCE
                  platformUrl: https://foo-bar.com

responses:
  PlatformVerificationResponse:
    description: platform validator response
    content:
      application/vnd.api+json:
        schema:
          type: object
          properties:
            data:
              type: object
              properties:
                type:
                  $ref: '../../internal.yaml#/components/schemas/type'
                id:
                  $ref: '../../internal.yaml#/components/schemas/id'
                attributes:
                  type: object
                  properties:
                    platformUrl:
                      type: string
                    authenticationUrl:
                      type:
                        - string
                        - 'null'
                    required:
                      - platformUrl
                      - authenticationUrl
              required:
                - type
                - id
                - attributes
    headers:
      Content-Type:
        schema:
          type: string
        description: application/vnd.api+json
